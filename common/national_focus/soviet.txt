
focus_tree = {
	id = soviet_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = SOV
		}
	}

	continuous_focus_position = { x = 0 y = 900 }

	default = no

	focus = {
		id = SOV_spanish_war
		icon = GFX_sov_spanish_war

		available = {
			has_global_flag = spanish_civil_war
		}
		bypass = {
			has_global_flag = scw_over
		}
		continue_if_invalid = yes
		x = 14
		y = 0
		cost = 5
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes

		completion_reward = {
			SPR = {
				add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 6000 producer = SOV }
				add_equipment_to_stockpile = { type = support_equipment_1 amount = 1000 producer = SOV }
				add_equipment_to_stockpile = { type = artillery_equipment_1 amount = 1000 producer = SOV }
				add_opinion_modifier = { target = SOV modifier = large_increase  }
			}
			army_experience = 50
			add_timed_idea = {
				idea = SOV_helping_spain
				days = 120
			}
		}
	}



	#Focus for Finish the Five Year plan
	focus = {
		id = SOV_finish_the_five_year_plan
		icon = GFX_goal_generic_construct_civ_factory
		x = 2
		y = 0
		cost = 7.15
		ai_will_do = {
			factor = 5
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			if = {
				limit = {
					NOT = { has_idea = partial_economic_mobilisation }
				}
				add_ideas = partial_economic_mobilisation
				add_political_power = -50
			}
			else_if = {
				limit = {
					has_idea = partial_economic_mobilisation
				}
					add_political_power = 100
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Strength GOSPLAN
	focus = {
		id = SOV_strength_gosplan
		icon = GFX_sov_five_year_plan_IC_1
		x = 4
		y = 1
		cost = 4.29
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_review_gosplan }
		ai_will_do = {
			factor = 1
		}
		available = {
		}

		completion_reward = {
			add_ideas = nikolai_voznesensky
			swap_ideas = { remove_idea = SOV_idea_2_5_year_plan add_idea = SOV_idea_2_5_year_plan_CIC }
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Review GOSPLAN
	focus = {
		id = SOV_review_gosplan
		icon = GFX_sov_five_year_plan_MIC_1
		x = 6
		y = 1
		cost = 4.29
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_strength_gosplan }
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			swap_ideas = { remove_idea = SOV_idea_2_5_year_plan add_idea = SOV_idea_2_5_year_plan_MIL }
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}

	}

	#Focus for Focus on Heavy industry
	focus = {
		id = SOV_focus_on_heavy_industry
		icon = GFX_sov_five_year_plan_IC_2
		x = 4
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_strength_gosplan }
		ai_will_do = {
			factor = 1
		}
		available = {
			has_full_control_of_state = 219
			has_full_control_of_state = 195
			has_full_control_of_state = 217
		}

		complete_tooltip = {
			195 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			219 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 195 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 219 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 217 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Focus on Military industry
	focus = {
		id = SOV_focus_on_military_industry
		icon = GFX_sov_five_year_plan_MIC_2
		x = 6
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_review_gosplan }
		ai_will_do = {
			factor = 1
		}
		complete_tooltip = {
			195 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			219 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 195 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 219 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 217 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}


	#Focus for Third Five-Year Plan
	focus = {
		id = SOV_third_five_year_plan
		icon = GFX_sov_third_five_year_plan
		relative_position_id = SOV_focus_on_heavy_industry
		x = 1
		y = 1
		cost = 4.29
		available_if_capitulated = yes
		prerequisite = {
			focus = SOV_focus_on_heavy_industry
			focus = SOV_focus_on_military_industry
		}
		ai_will_do = {
			factor = 1
		}
		available = {
			NOT = {
				OR = {
					has_idea = SOV_idea_2_5_year_plan_MIL
					has_idea = SOV_idea_2_5_year_plan_CIC
				}
			}
		}
		bypass = {
			has_defensive_war = yes
		}
		completion_reward = {
			add_timed_idea {
				idea = SOV_idea_third_five_year_plan
				days = 1825
			}
		}
	}

	#Focus for Improve infrastructure
	focus = {
		id = SOV_improve_infrastructure
		icon = GFX_goal_generic_construct_infrastructure
		relative_position_id = SOV_finish_the_five_year_plan
		x = -2

		y = 1
		cost = 7.15
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		ai_will_do = {
			factor = 1
		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			208 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			263  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			246  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			254  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			257  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			260  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			265  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {

			random_owned_controlled_state = {
				prioritize = { 208 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 263 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 246 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 254 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 257 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 260 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 265 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 5 }
		}
	}

	#Focus for Add Production Quota
	focus = {
		id = SOV_add_production_quota
		icon = GFX_sov_add_production_quota
		relative_position_id = SOV_improve_infrastructure
		x = 0
		y = 1
		cost = 4.29
		available_if_capitulated = yes
		prerequisite = { focus = SOV_improve_infrastructure }
		ai_will_do = {
			factor = 1
		}
		completion_reward {
			add_to_variable = { var = 5_year_plan_progress value = 5 }
		}
	}

	#Focus for Transiberiana
	focus = {
		id = SOV_transsiberian
		icon = GFX_goal_generic_construct_infrastructure
		relative_position_id = SOV_improve_infrastructure
		x = 2
		y = 1
		cost = 10
		prerequisite = { focus = SOV_improve_infrastructure }
		completion_reward = {
			add_to_variable = { var = 5_year_plan_progress value = 5 }
			custom_effect_tooltip = SOV_transsiberian_tt
			hidden_effect = {
				219 = { # Moscow
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				248 = { # Yaroslavl
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				351 = { # Vologda
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				400 = { # Kirov
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				398 = { # Perm
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				573 = { # Zlatoust
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				653 = { # Sverdlovsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				403 = { # Tyumen
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				571 = { # Omsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				570 = { # Novosibirsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				569 = { # Kemerovo
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				568 = { # Krasnoyarsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				567 = { # Bratsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				566 = { # Irkutsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				564 = { # Ulan Ude
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				563 = { # Chita
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				561 = { # Amur
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				657 = { # Biribidzhan
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				409 = { # Khabarovsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				408 = { # Vladivostok
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	#Focus for Magnitogorsk
	focus = {
		id = SOV_magnitogorsk
		icon = GFX_sov_magnitogorsk
		relative_position_id =  SOV_transsiberian
		x = 0
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_transsiberian }
		ai_will_do = {
			factor = 1
		}
		available = {
			has_full_control_of_state = 582
		}

		complete_tooltip = {
			582 = {
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
			582 = {
				add_resource = {
					type = steel
					amount = 25
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 582 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 4
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = industrial_complex
					level = 4
					instant_build = yes
				}
			}
			582 = {
				add_resource = {
					type = steel
					amount = 25
				}
			}
		}
	}




	#Focus for Gosstandart
	focus = {
		id = SOV_gosstandart
		icon = GFX_gosstandart
		x = 8
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_stakanovite }
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			add_ideas = idea_gosstandart
		}
	}

	#Focus for Stackanovite
	focus = {
		id = SOV_stakanovite
		icon = GFX_stakanovite
		x = 10
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_gosstandart }
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_ideas = idea_stakanovite
		}
	}

	#Focus for Transpolar Flight
	focus = {
		id = SOV_transpolar_flights
		icon = GFX_sov_transpolar_flight
		x = 12
		y = 0
		cost = 4.29
		ai_will_do = {
			factor = 8
		}
		available_if_capitulated = yes
		completion_reward = {
			add_tech_bonus = {
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
		}
	}

	#Focus for Aviation Cult
	focus = {
		id = SOV_air_volunteers
		icon = GFX_sov_air_volunteers
		prerequisite = {
			focus = SOV_transpolar_flights
			focus = SOV_operation_zet
			focus = SOV_spanish_war
		}
		x = 14
		y = 1
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			air_experience = 25
			add_tech_bonus = {
				name = air_bonus
				bonus = 1
				uses = 1
				category = light_air
			}
			add_tech_bonus = {
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
		}
	}

	#Focus for Positive heroism
	focus = {
		id = SOV_positive_heroism
		icon = GFX_sov_positive_heroism
		prerequisite = {
			focus = SOV_stakanovite
			focus = SOV_gosstandart
		}
		x = 10
		y = 2
		cost = 10
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = yes
		completion_reward = {
			add_political_power = 120
			add_ideas = SOV_soviet_propaganda
		}
	}

	#Focus for Cult of personality
	focus = {
		id = SOV_cult_of_personality
		icon = GFX_sov_cult_of_personality
		prerequisite = { focus = SOV_positive_heroism }
		x = 10
		y = 3
		cost = 10
		ai_will_do = {
			factor = 5
		}
		available_if_capitulated = yes
		available = {
			communism > 0.98
			has_stability > 0.6
		}
		completion_reward = {
			add_ideas = SOV_cult_of_personality
		}
	}

	#Focus for Soviet Science
	focus = {
		id = SOV_socialist_science
		icon = GFX_sov_socialist_science
		prerequisite = {
			focus = SOV_stakanovite
			focus = SOV_gosstandart
		}
		x = 8
		y = 2
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_research_slot = 1
		}
	}


	focus = {
		id = SOV_leningrad_institute
			icon = GFX_sov_leningrad_institute
			prerequisite = { focus = SOV_socialist_science }
			continue_if_invalid = yes
			available_if_capitulated = yes
			x = 0
			y = 1
			relative_position_id = SOV_socialist_science
			cost = 7.16

			available = {
				has_tech = computing_machine
			}

			ai_will_do = {
				factor = 8
			}

			completion_reward = {
				add_ideas = leningrad_polytechnical_institute
				add_tech_bonus = {
					category = electronics
					uses = 2
					bonus = 1
				}
			}
		}


	#Focus for Increase rubber production
	focus = {
		id = SOV_increase_rubber
		icon = GFX_goal_generic_soviet_construction
		prerequisite = {
			focus = SOV_add_production_quota
		}
		x = 0
		y = 3
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		available = {
			controls_state = 229
		}
		completion_reward = {
			add_resource = {
				type = rubber
				amount = 36
				state = 229
			}
		}
	}

	#focus for The Great Purge
	focus = {
		id = SOV_great_purge
		icon = GFX_goal_generic_war_with_comintern
		available = {
			has_government = communism
		}
		x = 18
		y = 0
		cost = 2
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				any_claim = yes
				has_war = yes
			}
		}
		select_effect = {
			country_event = { id = soviet.24 days = 1 }
			set_country_flag = SOV_purge_started
		}
		completion_reward = {
			add_timed_idea = {
				idea = SOV_idea_purge_time
				days = 480
			}
		}
	}

	#focus for nkvd
	focus = {
		id = SOV_nkvd_power
		icon = GFX_sov_nkvd_power
		prerequisite = {
			focus = SOV_great_purge
		}
		# mutually_exclusive = { focus = SOV_rehabilitated_military }
		relative_position_id = SOV_great_purge
		x = 0
		y = 1
		cost = 4.29
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}
		available_if_capitulated = yes
		completion_reward = {
			add_ideas = nkvd
		}
	}

	#focus for Stalin Const
	focus = {
		id = SOV_stalin_constitution
		icon = GFX_sov_stalin_constitution
		prerequisite = { focus = SOV_great_purge }
		relative_position_id = SOV_great_purge
		x = 2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 50
				any_claim = yes
				has_war = yes
			}
		}
		available_if_capitulated = yes
		completion_reward = {
			add_political_power = 100
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_claims_on_baltic
		icon = GFX_sov_secure_baltic
		prerequisite = { focus = SOV_stalin_constitution }
		relative_position_id = SOV_stalin_constitution
		x = 0
		y = 1
		cost = 4.29
		available = {
			AND = {
				POL = { has_war = yes }
				has_idea = SOV_molotov_ribbentrop_pact
			}
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = POL }
				AND = {
					owns_state = 11
					owns_state = 12
					owns_state = 189
					owns_state = 190
					owns_state = 13
					owns_state = 191
				}
			}
		}
		completion_reward = {
			add_state_claim = 11
			add_state_claim = 12
			add_state_claim = 13
			add_state_claim = 189
			add_state_claim = 190
			add_state_claim = 191
			add_named_threat = { threat = 3 name = SOV_claims_on_baltic }
			SOV = { country_event = soviet.32 }
			SOV = { country_event = soviet.33 }
			SOV = { country_event = soviet.34 }
			every_other_country = {

				limit = {
					OR = {
						owns_state = 11
						owns_state = 12
						owns_state = 189
						owns_state = 190
						owns_state = 13
						owns_state = 191
					}
				}
				add_opinion_modifier = { target = SOV modifier = threat_to_baltic }
			}
		}
	}

	focus = {
			id = SOV_baltic_security
			icon = GFX_sov_secure_finland
			prerequisite = { focus = SOV_claims_on_baltic }
			relative_position_id = SOV_claims_on_baltic
			x = 0
			y = 1
			cost = 2
			available = {
				SOV = {
					has_full_control_of_state = 13
				}
			}
			ai_will_do = {
				factor = 100
				modifier = {
					factor = 0
					date < 1939.3.1
				}
			}
			bypass = {
				OR = {
					owns_state = 146
				}
			}
			completion_reward = {
				add_state_claim = 146 # Karjala
				SOV = { country_event = soviet.31 }
				add_named_threat = { threat = 1 name = SOV_baltic_security }
			}
		}




	focus = {
		id = SOV_claim_bessarabia
		icon = GFX_sov_secure_bessarabia
		prerequisite = { focus = SOV_baltic_security }
		relative_position_id = SOV_baltic_security
		x = 0
		y = 1
		cost = 4.29
		available = {
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}
		}

		bypass = {
				owns_state = 78
				owns_state = 80
				owns_state =766
		}
		completion_reward = {
			if = {
				limit = { 78 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 78
			}
			if = {
				limit = { 766 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 766
			}
			if = {
				limit = { 80 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 80
			}
			add_named_threat = { threat = 1 name = SOV_claim_bessarabia }
			SOV = { country_event = soviet.30 }
			random_other_country = {
				limit = { owns_state = 78 }
				add_opinion_modifier = { target = SOV modifier = claimed_bessarabia }
				set_country_flag = SOV_added_claimed_bessarabia
			}
			if = {
				limit = {
					any_other_country = {
						owns_state = 78
						NOT = {	owns_state = 80 }
					}
				}
				random_other_country = {
					limit = {
						owns_state = 80
						NOT = { has_country_flag = SOV_added_claimed_bessarabia }
					}
					add_opinion_modifier = { target = SOV modifier = claimed_bucovina }
				}
			}
			if = {
				limit = {
					AND = {
						any_other_country = {
							owns_state = 78
							NOT = {	owns_state = 766 }
						}
						any_other_country = {
							owns_state = 80
							NOT = {	owns_state = 766 }
						}
					}
				}
				random_other_country = {
					limit = {
						owns_state = 766
						NOT = { has_country_flag = SOV_added_claimed_bessarabia }
					}
					add_opinion_modifier = { target = SOV modifier = claimed_bucovina }
				}
			}
		}
	}

	focus = {
		id = SOV_komsomol
		icon = GFX_sov_komsomol
		prerequisite = { focus = SOV_stalin_constitution }
		x = 2
		y = 1
		relative_position_id = SOV_stalin_constitution
		cost = 7
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 3
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = militarized_schools
		}
	}

	focus = {
		id = SOV_peoples_commissariat
		icon = GFX_sov_pdci
		prerequisite = { focus = SOV_stalin_constitution }
		x = 4
		y = 1
		relative_position_id = SOV_stalin_constitution
		cost = 7.16
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = yes
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = peoples_commissariat_focus
		}
	}

	focus = {
		id = SOV_t34
		icon = GFX_sov_t34
		prerequisite = { focus = SOV_peoples_commissariat }
		available = { has_tech = basic_medium_tank }
		x = -2
		y = 1
		relative_position_id = SOV_peoples_commissariat
		cost = 4.29
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = yes
			}
		}

		available_if_capitulated = yes
		bypass = {
			has_tech = improved_medium_tank
		}
		completion_reward = {
			add_tech_bonus = {
				name = med_armor_bonus
				ahead_reduction = 2
				category = cat_medium_armor
			}
		}
	}

	focus = {
		id = SOV_il2
		icon = GFX_sov_il2
		prerequisite = { focus = SOV_air_volunteers }
		available = { has_tech = CAS1 }
		x = 0
		y = 1
		relative_position_id = SOV_air_volunteers
		cost = 4.29
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 5
				has_war = yes
			}
		}
		available_if_capitulated = yes
		bypass = {
			has_tech = CAS2
		}
		completion_reward = {
			add_tech_bonus = {
				name = CAS2_bonus
    		bonus = 1
    		uses = 1
				category = cas_bomber
			}
			add_ideas = ilyushin_design_bureau
		}
	}

	#focus for Operation Zet
	focus = {
		id = SOV_operation_zet
		icon = GFX_sov_operation_zet
		prerequisite = {
			focus = SOV_great_purge
		}
		available = {
			JAP = { has_war_with = CHI }
		}
		bypass = {
			CHI = {
				OR = {
					exists = no
					is_puppet = yes
				}
			}
		}
		relative_position_id = SOV_great_purge
		x = -2
		y = 1
		cost = 7.16
		ai_will_do = {
			factor = 10
		}
		available_if_capitulated = yes
		completion_reward = {
			set_country_flag = CHI_soviet_volunteer_group
			add_timed_idea = {
				idea = SOV_foreign_production
				days = 80
			}
			CHI = {
				add_equipment_to_stockpile = { type = infantry_equipment_0 amount = 20000 producer = SOV }
				add_equipment_to_stockpile = { type = support_equipment_1 amount = 2500 producer = SOV }
				add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 600 producer = CHI }
			}
		}
	}

	focus = {
		id = SOV_far_east_fortification
		icon = GFX_sov_eastern_security
		prerequisite = { focus = SOV_operation_zet }
		relative_position_id = SOV_great_purge
		x = 0
		y = 2
		continue_if_invalid = yes
		cost = 7.16
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			country_event = { id = soviet.1 days = 1 }
			563 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_1
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 4719
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 12622
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10559
							instant_build = yes
						}
					}
				}
			}
			657 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_2
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 7763
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 4725
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10655
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 7801
							instant_build = yes
						}
					}
				}
			}
			409 = {
				if = {
					limit = { is_controlled_by = ROOT }
					custom_effect_tooltip = SOV_far_east_fortification_forts_3
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 2
							province = 12189
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 2
							province = 10466
							instant_build = yes
						}
					}
				}
			}
			408 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 2
						province = 11643
						instant_build = yes
					}
				}
			}
		}
	}


	focus = {
		id = SOV_lessons_of_the_winter_war
		icon = GFX_sov_lessons_of_war
		prerequisite = { focus = SOV_far_east_fortification }
		relative_position_id = SOV_great_purge
		x = 0
		y = 3
		available = {
			has_full_control_of_state = 146
		}

		continue_if_invalid = yes

		cost = 7.16
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 20
			add_tech_bonus = {
				name = land_doc_bonus
				bonus = 1.0
				uses = 2
				category = land_doctrine
			}

			####  MAULUS FROM PURGE REMAINS
			##	if = { limit = { has_idea = officers_purged } remove_ideas = officers_purged }
			##	if = { limit = { has_idea = officers_purged_2 } remove_ideas = officers_purged_2 }
			##	if = { limit = { has_idea = officers_purged_3 } remove_ideas = officers_purged_3 }
			##	if = { limit = { has_idea = officers_purged_4 } remove_ideas = officers_purged_4 }
			##	if = { limit = { has_idea = officers_purged_5 } remove_ideas = officers_purged_5 }
			##	if = { limit = { has_idea = officers_purged_6 } remove_ideas = officers_purged_6 }
			##	if = { limit = { has_idea = officers_purged_7 } remove_ideas = officers_purged_7 }
			##	if = { limit = { has_idea = officers_purged_8 } remove_ideas = officers_purged_8 }
			##	if = { limit = { has_idea = officers_purged_9 } remove_ideas = officers_purged_9 }
			##	if = { limit = { has_idea = officers_purged_10 } remove_ideas = officers_purged_10 }
			##	if = { limit = { has_idea = SOV_great_patriotic_war } remove_ideas = SOV_great_patriotic_war }
			##	if = { limit = { has_idea = SOV_great_patriotic_war_2 } remove_ideas = SOV_great_patriotic_war_2 }
			##	if = { limit = { has_idea = SOV_great_patriotic_war_3 } remove_ideas = SOV_great_patriotic_war_3 }
			##	if = { limit = { has_idea = SOV_great_patriotic_war_4 } remove_ideas = SOV_great_patriotic_war_4 }
			##	if = { limit = { has_idea = SOV_great_patriotic_war_5 } remove_ideas = SOV_great_patriotic_war_5 }

		}
	}


	focus = {
		id = SOV_nkvd_divisions
		icon = GFX_sov_nkvd_divisions
		prerequisite = { focus = SOV_nkvd_power }
		prerequisite = { focus = SOV_lessons_of_the_winter_war }
		relative_position_id = SOV_nkvd_power
		x = 0
		y = 3
		cost = 7.16
		ai_will_do = {
			factor = 10

		}
		available_if_capitulated = yes
		completion_reward = {
			swap_ideas = { remove_idea = nkvd add_idea = nkvd_2 }
		}
	}

	focus = {
		id = SOV_build_molotov_line
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_claims_on_baltic }
		available = {
			has_offensive_war = no
			AND = {
				has_full_control_of_state = 11
				has_full_control_of_state = 12
				has_full_control_of_state = 89
				has_full_control_of_state = 91
				has_full_control_of_state = 93
				has_full_control_of_state = 94
				has_full_control_of_state = 95
				has_full_control_of_state = 96
				has_full_control_of_state = 97
				has_full_control_of_state = 189
				has_full_control_of_state = 190
				has_full_control_of_state = 191
			}
		}
		x = -1
		y = 3
		relative_position_id = SOV_claims_on_baltic
		cost = 10
		ai_will_do = {
			factor = 10
		}
		cancel_if_invalid = yes
		select_effect = {
			add_timed_idea = {
				idea = SOV_military_build
				days = 70
			}
		}

		completion_reward = {
			11 = {
				add_building_construction = {
					type = bunker
					level = 4
					province = 6407
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 5
					province = 6296
					instant_build = yes
				}
			}
			89 = {
				add_building_construction = {
					type = bunker
					level = 4
					province = 11411
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 6431
					instant_build = yes
				}
			}
			95 = {
				add_building_construction = {
					type = bunker
					level = 4
					province = 9359
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 3366
					instant_build = yes
				}
			}
			91 = {
				add_building_construction = {
					type = bunker
					level = 5
					province = 11479
					instant_build = yes
				}
			}
			94 = {
				add_building_construction = {
					type = bunker
					level = 7
					province = 3392
					instant_build = yes
				}
			}
			189 = {
				add_building_construction = {
					type = bunker
					level = 4
					province = 9731
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					level = 4
					province = 6360
					instant_build = yes
				}
			}
			97 = {
				add_building_construction = {
					type = bunker
					level = 5
					province = 3393
					instant_build = yes
				}
			}
			190 = {
				add_building_construction = {
					type = bunker
					level = 4
					province = 9262
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SOV_improve_stalin_line
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_build_molotov_line }
		available = { has_offensive_war = no }
		x = 0
		y = 1
		relative_position_id = SOV_build_molotov_line
		cost = 10
		ai_will_do = {
			factor = 10
		}
		select_effect = {
      add_timed_idea = {
				idea = SOV_military_build
				days = 70
			}
    }
		completion_reward = {
			209 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 6
						province = 415
						instant_build = yes
					}
				}
				#add_building_construction = {
				#	type = bunker
				#	level = 6
				#	province = 209
				#	instant_build = yes
				#}
			}
			210 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3333
						instant_build = yes
					}
				}
			}
			207 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 3219
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6371
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6220
						instant_build = yes
					}
				}
			}
			206 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 4
						province = 11370
						instant_build = yes
					}
				}
			}
			202 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 525
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 7
						province = 3494
						instant_build = yes
					}
				}

			}
			203 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 7
						province = 11409
						instant_build = yes
					}
				}
			}
			192 = {
				if = {
					limit = { is_controlled_by = ROOT }
					add_building_construction = {
						type = bunker
						level = 5
						province = 754
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 741
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 5
						province = 11670
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_morozov
		icon = GFX_sov_morozov
		prerequisite = { focus = SOV_third_five_year_plan }
		mutually_exclusive = { focus = SOV_okmo }
		x = -1
		y = 1
		relative_position_id = SOV_third_five_year_plan
		cost = 7.15
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 5
				has_war = yes
			}
		}
		completion_reward = {
			add_ideas = morozov_design_bureau
		}
	}

	focus = {
		id = SOV_okmo
		icon = GFX_sov_okmo
		prerequisite = { focus = SOV_third_five_year_plan }
		mutually_exclusive = { focus = SOV_morozov }
		x = 1
		y = 1
		relative_position_id = SOV_third_five_year_plan
		cost = 7.15
		ai_will_do = {
			factor = 1
		}
		completion_reward = {
			add_ideas = okmo
		}
	}

	focus = {
		id = SOV_great_patriotic
		icon = GFX_sov_great_patriotic
		available = {
			SOV = { has_war_with = GER }
			SOV = { has_defensive_war = yes }
		}

		x = 12
		y = 4
		cost = 2.15
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_ideas = SOV_the_great_patriotic_war
		}
	}

	focus = {
		id = SOV_move_industry_to_urals
		icon = GFX_goal_generic_construct_civilian
		prerequisite = { focus = SOV_great_patriotic }
		x = 2
		y = 1
		relative_position_id = SOV_great_patriotic
		cost = 2.15
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { has_war_with = GER }
				surrender_progress < 0.1
			}
			modifier = {
				factor = 5
				surrender_progress > 0.1
			}
			modifier = {
				factor = 5
				has_war_with = GER
			}
		}
	}

	focus = {
		id = SOV_defense_of_moscow
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_move_industry_to_urals }
		available = {
			219 = {
				is_controlled_by = ROOT

				OR = {
					any_neighbor_state = {
						NOT = { is_controlled_by = ROOT }
					}

					SOV = { surrender_progress > 0.1 }
				}
			}
		}
		x = 0
		y = 1
		relative_position_id = SOV_move_industry_to_urals
		cost = 5
		bypass = {
			NOT = {
				controls_state = 219
			}
			surrender_progress > 0.3
		}
		ai_will_do = {
			factor = 100
		}
		completion_reward = {
			army_experience = 5
			219 = {
				custom_effect_tooltip = SOV_defense_of_moscow_forts
				hidden_effect = {
					add_building_construction = {
						type = bunker
						level = 3
						province = 3391
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6414
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9348
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 301
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 9378
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 6283
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 3259
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 3
						province = 11282
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 6380
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SOV_tankograd
		icon = GFX_sov_tankograd
		cost = 7.16
		prerequisite = {
			focus = SOV_move_industry_to_urals
		}
		x = 2
		y = 1
		relative_position_id = SOV_move_industry_to_urals
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				has_war = yes
			}
		}
		completion_reward = {
			add_ideas = tankograd
		}
	}

	focus = {
		id = SOV_establish_the_stavka
		icon = GFX_sov_establish_the_stavka
		cost = 7.16
		relative_position_id = SOV_great_patriotic
		x = -2
		y = 1
		prerequisite = { focus = SOV_great_patriotic }
		available = {
			has_army_experience > 50
		}
		ai_will_do = {
			factor = 1.5
			modifier = {
				factor = 2
				has_war = yes
			}
		}
		completion_reward = {
			add_ideas = stavka
		}
	}

	focus = {
		id = SOV_increase_il2_production
		icon = GFX_sov_increase_il2_production
		prerequisite = { focus = SOV_establish_the_stavka }
		available = {
			has_completed_focus = SOV_move_industry_to_urals
			249 = { is_owned_and_controlled_by = ROOT }
		}
		x = 0
		y = 1
		relative_position_id = SOV_establish_the_stavka
		cost = 10
		ai_will_do = {
			factor = 4
			modifier = {
				has_war_with = GER
				factor = 2
			}
			modifier = {
				has_war = yes
				factor = 2
			}
		}

		completion_reward = {
			249 = {
				if = {
					limit = {
						free_building_slots = {
							building = air_base
							size > 3
						}
					}
					add_building_construction = {
						type = air_base
						level = 4
						instant_build = yes
					}
				}
				set_state_category = city
			}
			add_ideas = massive_air_production

		}
	}


	focus = {
		id = SOV_expand_red_fleet
		icon = GFX_goal_generic_build_navy
		prerequisite = { focus = SOV_peoples_commissariat }
		available = { has_offensive_war = no }
		x = 0
		y = 1
		relative_position_id = SOV_peoples_commissariat
		cost = 10
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 0
				has_war_with = GER
				surrender_progress > 0.1
			}
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SOV_expand_red_fleet_2dockyards }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			add_tech_bonus = {
				name = ships_bonus
				bonus = 1.0
				uses = 2
				category = naval_equipment
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_expand_red_fleet_2dockyards
			}
			random_owned_controlled_state = {
				limit = {
					dockyard > 0
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SOV_expand_red_fleet_2dockyards
			}
			add_tech_bonus = {
				name = ships_bonus
				bonus = 1.0
				uses = 2
				category = naval_equipment
			}
		}
	}

	focus = {
		id = SOV_military_research
		icon = GFX_sov_military_research
		cost = 7.16
		prerequisite = {
			focus = SOV_great_patriotic
		}
		x = 0
		y = 1
		relative_position_id = SOV_great_patriotic
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 1.5
				has_war = yes
			}
		}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SOV_smersh
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SOV_great_patriotic }
		x = 4
		y = 1
		relative_position_id = SOV_great_patriotic
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			#custom_effect_tooltip = SOV_smersh_tt
			add_tech_bonus = {
				bonus = 0.5
				uses = 2
				category = encryption_tech
				category = decryption_tech
			}
		}
	}

	focus = {
		id = SOV_progress_cult
		icon = GFX_sov_progress_cult
		prerequisite = { focus = SOV_leningrad_institute }
		x = 0
		y = 1
		relative_position_id = SOV_leningrad_institute
		cost = 10
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = progress_cult_focus
		}
	}

	focus = {
		id = SOV_borodino
		icon = GFX_sov_borodino
		prerequisite = { focus = SOV_progress_cult }
		available = {

		}
		x = 0
		y = 1
		relative_position_id = SOV_progress_cult
		cost = 10
		ai_will_do = {
			factor = 2
			modifier = {
				factor = 5
				has_war = yes
			}
		}


		completion_reward = {
			add_tech_bonus = {
				name = nuclear_bonus
				bonus = 1.0
				uses = 1
				category = nuclear
			}
		}
	}


	focus = {
		id = SOV_defense_of_leningrad
		icon = GFX_goal_generic_fortify_city
		prerequisite = { focus = SOV_move_industry_to_urals }
		available = {
			195 = {
				is_controlled_by = ROOT
			}
		}
		x = -2
		y = 1
		relative_position_id = SOV_move_industry_to_urals
		cost = 5
		ai_will_do = {
			factor = 4
			modifier = {
				factor = 30
				AND = {
					has_war_with = FIN
					has_war_with = GER
				}
			}
			modifier = {
				factor = 4
				has_war = yes
			}
			modifier = {
				factor = 2
				surrender_progress > 0.2
			}
		}
		completion_reward = {
			army_experience = 5
			195 = {
				custom_effect_tooltip = SOV_defense_of_leningrad_tt
				hidden_effect = {
					add_building_construction = {
						type = bunker
						level = 6
						province = 3151
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 4
						province = 149
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 6174
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 79
						instant_build = yes
					}
					add_building_construction = {
						type = bunker
						level = 2
						province = 11068
						instant_build = yes
					}
					add_building_construction = {
						type = anti_air_building
						level = 3
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					146 = {
						is_controlled_by = ROOT
					}
				}
				146 = {
					hidden_effect = {
						add_building_construction = {
							type = bunker
							level = 3
							province = 3060
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 3
							province = 9150
							instant_build = yes
						}
						add_building_construction = {
							type = anti_air_building
							level = 1
							instant_build = yes
						}
					}
				}
			}

		}
	}


}
	###
