
focus_tree = {
	id = soviet_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = SOV
		}
	}

	continuous_focus_position = { x = 1000 y = 900 }

	default = no

	#Focus for Finish the Five Year plan
	focus = {
		id = SOV_finish_the_five_year_plan
		icon = GFX_goal_generic_construct_civ_factory
		x = 0
		y = 0
		cost = 10
		ai_will_do = {
			factor = 5
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			if = {
				limit = {
					NOT = { has_idea = partial_economic_mobilisation }
				}
				add_ideas = partial_economic_mobilisation
				add_political_power = -50
			}
			else_if = {
				limit = {
					has_idea = partial_economic_mobilisation
				}
					add_political_power = 100
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Strength GOSPLAN
	focus = {
		id = SOV_strength_gosplan
		icon = GFX_sov_five_year_plan_IC_1
		x = 4
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_review_gosplan }
		ai_will_do = {
			factor = 1
		}
		available = {
		}

		completion_reward = {
			add_ideas = SOV_nikolai_voznesensky
			swap_ideas = { remove_idea = SOV_idea_2_5_year_plan add_idea = SOV_idea_2_5_year_plan_CIC }
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Review GOSPLAN
	focus = {
		id = SOV_review_gosplan
		icon = GFX_sov_five_year_plan_MIC_1
		x = 6
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_strength_gosplan }
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			swap_ideas = { remove_idea = SOV_idea_2_5_year_plan add_idea = SOV_idea_2_5_year_plan_MIL }
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}

	}

	#Focus for Focus on Heavy industry
	focus = {
		id = SOV_focus_on_heavy_industry
		icon = GFX_sov_five_year_plan_IC_2
		x = 4
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_strength_gosplan }
		ai_will_do = {
			factor = 1
		}
		available = {
			has_full_control_of_state = 219
			has_full_control_of_state = 195
			has_full_control_of_state = 217
		}

		complete_tooltip = {
			195 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			219 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 195 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 219 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 217 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}

	#Focus for Focus on Military industry
	focus = {
		id = SOV_focus_on_military_industry
		icon = GFX_sov_five_year_plan_MIC_2
		x = 6
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_review_gosplan }
		ai_will_do = {
			factor = 1
		}
		complete_tooltip = {
			195 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			219 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			217 = {
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 195 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 219 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 217 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 10 }
		}
	}


	#Focus for Improve infrastructure
	focus = {
		id = SOV_improve_infrastructure
		icon = GFX_goal_generic_construct_infrastructure
		x = 0
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		ai_will_do = {
			factor = 1
		}
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			208 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			263  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			246  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			254  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			257  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			260  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			265  = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {

			random_owned_controlled_state = {
				prioritize = { 208 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 263 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 246 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 254 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 257 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 260 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 265 }
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { var = 5_year_plan_progress value = 5 }
		}
	}

	#Focus for Add Production Quota
	focus = {
		id = SOV_add_production_quota
		icon = GFX_sov_add_production_quota
		x = 0
		y = 2
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_improve_infrastructure }
		ai_will_do = {
			factor = 1
		}
		completion_reward {
			add_to_variable = { var = 5_year_plan_progress value = 5 }
		}
	}

	#Focus for Transiberiana
	focus = {
		id = SOV_transsiberian
		icon = GFX_goal_generic_soviet_construction
		x = 2
		y = 2
		cost = 17.2
		prerequisite = { focus = SOV_improve_infrastructure }
		completion_reward = {
			add_to_variable = { var = 5_year_plan_progress value = 5 }
			custom_effect_tooltip = SOV_transsiberian_tt
			hidden_effect = {
				219 = { # Moscow
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				248 = { # Yaroslavl
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				351 = { # Vologda
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				400 = { # Kirov
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				398 = { # Perm
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				573 = { # Zlatoust
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				653 = { # Sverdlovsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				403 = { # Tyumen
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				571 = { # Omsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				570 = { # Novosibirsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				569 = { # Kemerovo
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				568 = { # Krasnoyarsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				567 = { # Bratsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				566 = { # Irkutsk
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				564 = { # Ulan Ude
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
				563 = { # Chita
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				561 = { # Amur
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				657 = { # Biribidzhan
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				409 = { # Khabarovsk
					add_building_construction = {
						type = infrastructure
						level = 3
						instant_build = yes
					}
				}
				408 = { # Vladivostok
					add_building_construction = {
						type = infrastructure
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	#Focus for Gosstandart
	focus = {
		id = SOV_gosstandart
		icon = GFX_gosstandart
		x = 8
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_stakanovite }
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			add_ideas = idea_gosstandart
		}
	}

	#Focus for Stackanovite
	focus = {
		id = SOV_stakanovite
		icon = GFX_stakanovite
		x = 10
		y = 1
		cost = 10
		available_if_capitulated = yes
		prerequisite = { focus = SOV_finish_the_five_year_plan }
		mutually_exclusive = { focus = SOV_gosstandart }
		ai_will_do = {
			factor = 0
		}
		completion_reward = {
			add_ideas = idea_stakanovite
		}
	}

	#Focus for Transpolar Flight
	focus = {
		id = SOV_transpolar_flights
		icon = GFX_sov_transpolar_flight
		x = 11
		y = 0
		cost = 5
		ai_will_do = {
			factor = 8
		}
		available_if_capitulated = yes
		completion_reward = {
			add_tech_bonus = {
				bonus = 1.0
				uses = 1
				category = air_doctrine
			}
		}
	}

	#Focus for Aviation Cult
	focus = {
		id = SOV_aviation_cult
		icon = GFX_aviation_cult
		prerequisite = { focus = SOV_transpolar_flights }
		x = 11
		y = 4
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			air_experience = 25
			add_tech_bonus = {
				name = air_bonus
				bonus = 1
				uses = 1
				category = light_air
				category = medium_air
			}
		}
	}

	#Focus for Positive heroism
	focus = {
		id = SOV_positive_heroism
		icon = GFX_sov_positive_heroism
		prerequisite = {
			focus = SOV_stakanovite
			focus = SOV_gosstandart
		}
		x = 10
		y = 2
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_political_power = 120
			add_ideas = SOV_soviet_propaganda
		}
	}

	#Focus for Cult of personality
	focus = {
		id = SOV_cult_of_personality
		icon = GFX_sov_cult_of_personality
		prerequisite = { focus = SOV_positive_heroism }
		x = 10
		y = 3
		cost = 10
		ai_will_do = {
			factor = 8
		}
		available_if_capitulated = yes
		available = {
			communism > 0.99
			has_stability > 0.6
		}
		completion_reward = {
			add_ideas = SOV_stalin_the_father_of_socialism
		}
	}

	#Focus for Soviet Science
	focus = {
		id = SOV_socialist_science
		icon = GFX_sov_socialist_science
		prerequisite = {
			focus = SOV_stakanovite
			focus = SOV_gosstandart
		}
		x = 8
		y = 2
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		completion_reward = {
			add_research_slot = 1
		}
	}

	#Focus for Increase rubber production
	focus = {
		id = SOV_increase_rubber
		icon = GFX_sov_increase_rubber
		prerequisite = {
			focus = SOV_add_production_quota
		}
		x = 0
		y = 3
		cost = 10
		ai_will_do = {
			factor = 1
		}
		available_if_capitulated = yes
		available = {
			controls_state = 229
		}
		completion_reward = {
			add_resource = {
				type = rubber
				amount = 36
				state = 229
			}
		}
	}

	#focus for The Great Purge
	focus = {
		id = SOV_great_purge
		icon = GFX_goal_generic_war_with_comintern
		available = {
			has_government = communism
		}
		x = 14
		y = 0
		cost = 2
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				any_claim = yes
				has_war = yes
			}
		}
		select_effect = {
			country_event = { id = soviet.24 days = 1 }
			set_country_flag = SOV_purge_started
		}
		completion_reward = {
			add_timed_idea = {
				idea = SOV_idea_purge_time
				days = 480
			}
		}
	}

	#focus for nkvd
	focus = {
		id = SOV_nkvd_power
		icon = GFX_sov_nkvd_power
		prerequisite = {
			focus = SOV_great_purge
		}
		# mutually_exclusive = { focus = SOV_rehabilitated_military }
		relative_position_id = SOV_great_purge
		x = -2
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 1000
				any_claim = yes
				has_war = yes
			}
		}
		available_if_capitulated = yes
		completion_reward = {
			add_ideas = nkvd
		}
	}

	#focus for Stalin Const
	focus = {
		id = SOV_stalin_constitution
		icon = GFX_sov_stalin_constitution
		prerequisite = { focus = SOV_great_purge }
		relative_position_id = SOV_great_purge
		x = 0
		y = 1
		cost = 10
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 50
				any_claim = yes
				has_war = yes
			}
		}
		available_if_capitulated = yes
		completion_reward = {
			add_political_power = 100
			add_stability = 0.1
		}
	}

	focus = {
		id = SOV_claims_on_baltic
		icon = GFX_sov_secure_baltic
		prerequisite = { has_idea = SOV_molotov_ribbentrop_pact }
		prerequisite = { focus = SOV_stalin_constitution }
		relative_position_id = SOV_stalin_constitution
		x = 0
		y = 1
		cost = 5
		available = {
			POL = { has_war = yes }
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}
		}
		bypass = {
			OR = {
				NOT = { country_exists = POL }
				AND = {
					OR = {
						owns_state = 11
						11 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 12
						12 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 13
						13 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 189
						189 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 190
						190 = { is_claimed_by = ROOT }
					}
					OR = {
						owns_state = 191
						191 = { is_claimed_by = ROOT }
					}
				}
			}
		}
		completion_reward = {
			add_state_claim = 11
			add_state_claim = 12
			add_state_claim = 13
			add_state_claim = 189
			add_state_claim = 190
			add_state_claim = 191
			add_named_threat = { threat = 3 name = SOV_claims_on_baltic }
			## SOV = { country_event = soviet.32 }
			## SOV = { country_event = soviet.33 }
			## SOV = { country_event = soviet.34 }
			every_other_country = {

				limit = {
					OR = {
						owns_state = 11
						owns_state = 12
						owns_state = 189
						owns_state = 190
						owns_state = 13
						owns_state = 191
					}
				}
				add_opinion_modifier = { target = SOV modifier = threat_to_baltic }
			}
		}
	}


	focus = {
		id = SOV_claim_bessarabia
		icon = GFX_sov_secure_bessarabia
		prerequisite = { focus = SOV_claims_on_baltic }
		relative_position_id = SOV_claims_on_baltic
		x = 0
		y = 1
		cost = 5
		available = {
		}
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				date < 1939.1.1
			}
		}

		bypass = {
			OR = {
				owns_state = 78
				78 = { is_claimed_by = ROOT }
			}
			OR = {
				owns_state = 80
				80 = { is_claimed_by = ROOT }
			}
		}
		completion_reward = {
			if = {
				limit = { 78 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 78
			}
			if = {
				limit = { 766 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 766
			}
			if = {
				limit = { 80 = { OWNER = { NOT = { is_in_faction_with = ROOT} } } }
				add_state_claim = 80
			}
			add_named_threat = { threat = 1 name = SOV_claim_bessarabia }
			random_other_country = {
				limit = { owns_state = 78 }
				add_opinion_modifier = { target = SOV modifier = claimed_bessarabia }
				set_country_flag = SOV_added_claimed_bessarabia
			}
			if = {
				limit = {
					any_other_country = {
						owns_state = 78
						NOT = {	owns_state = 80 }
					}
				}
				random_other_country = {
					limit = {
						owns_state = 80
						NOT = { has_country_flag = SOV_added_claimed_bessarabia }
					}
					add_opinion_modifier = { target = SOV modifier = claimed_bucovina }
				}
			}
			if = {
				limit = {
					AND = {
						any_other_country = {
							owns_state = 78
							NOT = {	owns_state = 766 }
						}
						any_other_country = {
							owns_state = 80
							NOT = {	owns_state = 766 }
						}
					}
				}
				random_other_country = {
					limit = {
						owns_state = 766
						NOT = { has_country_flag = SOV_added_claimed_bessarabia }
					}
					add_opinion_modifier = { target = SOV modifier = claimed_bucovina }
				}
			}
		}
	}

}
	###
